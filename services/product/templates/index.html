{% extends "base.html" %}

{% block content %}
<div class="mb-6">
  <h1 class="text-2xl font-bold">Products</h1>
  <p class="text-gray-500 text-sm">Browse our latest products</p>
</div>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

  {% for p in products %}
  <div class="bg-white rounded-xl shadow p-4 flex flex-col card-hover">
    <div class="h-40 bg-gray-100 rounded mb-3 flex items-center justify-center text-gray-400">
      Image
    </div>

    <h2 class="font-semibold text-lg">{{ p.title }}</h2>
    <p class="text-gray-500 text-sm mt-1 truncate">{{ p.description }}</p>

    <div class="mt-4 flex justify-between items-center">
      <div>
        <div class="font-bold text-lg">₹{{ "%.2f"|format(p.price) }}</div>
        <div class="text-xs text-gray-500">Stock: {{ p.stock }}</div>
      </div>

      <a
        href="/product/{{ p.id }}"
        class="bg-primary text-white text-sm px-3 py-2 rounded hover:bg-accent"
      >
        View
      </a>
    </div>
  </div>
  {% endfor %}

</div>

<!-- ✅ PAGINATION -->
{% if pages and pages > 1 %}
<div class="flex justify-center mt-10 space-x-2">
  {% for num in range(1, pages + 1) %}
    <a
      href="?page={{ num }}{% if q %}&q={{ q }}{% endif %}"
      class="px-3 py-1 rounded border text-sm
      {% if num == page %}bg-primary text-white{% else %}bg-white{% endif %}">
      {{ num }}
    </a>
  {% endfor %}
</div>
{% endif %}

{% endblock %}
